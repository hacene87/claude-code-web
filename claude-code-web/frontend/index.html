<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code Web</title>
    <link rel="stylesheet" href="/static/styles.css">
    <!-- Marked.js for markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Highlight.js for code highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">
                    <span class="logo-icon">‚ö°</span>
                    Claude Code Web
                </h1>
                <div class="status-indicator" id="status-indicator">
                    <span class="status-dot"></span>
                    <span class="status-text">Connecting...</span>
                </div>
            </div>

            <!-- Workspace Selector -->
            <div class="workspace-section">
                <label class="section-label">Workspace</label>
                <div class="workspace-selector">
                    <input type="text" id="workspace-input" class="workspace-input"
                           placeholder="/path/to/project" value="." />
                    <button class="btn btn-icon" id="browse-btn" title="Browse">
                        üìÅ
                    </button>
                </div>
                <div id="workspace-info" class="workspace-info"></div>
            </div>

            <!-- Conversations List -->
            <div class="conversations-section">
                <div class="section-header">
                    <label class="section-label">Conversations</label>
                    <button class="btn btn-icon btn-new" id="new-conv-btn" title="New Conversation">
                        +
                    </button>
                </div>
                <div class="conversations-list" id="conversations-list">
                    <!-- Populated dynamically -->
                </div>
            </div>

            <!-- System Info -->
            <div class="system-info" id="system-info">
                <div class="info-item">
                    <span class="info-label">Claude CLI:</span>
                    <span class="info-value" id="claude-status">Checking...</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Chat Header -->
            <header class="chat-header">
                <div class="chat-title">
                    <span id="current-conv-title">New Conversation</span>
                </div>
                <div class="chat-actions">
                    <button class="btn btn-ghost" id="clear-btn" title="Clear messages">
                        üóëÔ∏è Clear
                    </button>
                    <button class="btn btn-ghost" id="settings-btn" title="Settings">
                        ‚öôÔ∏è
                    </button>
                </div>
            </header>

            <!-- Messages Container -->
            <div class="messages-container" id="messages-container">
                <div class="messages-list" id="messages-list">
                    <!-- Welcome message -->
                    <div class="welcome-message" id="welcome-message">
                        <div class="welcome-icon">‚ö°</div>
                        <h2>Welcome to Claude Code Web</h2>
                        <p>A local web interface for Claude Code CLI</p>
                        <div class="quick-actions">
                            <button class="quick-action" data-action="Explain the codebase structure">
                                üìÅ Explain codebase
                            </button>
                            <button class="quick-action" data-action="Find and fix any bugs">
                                üêõ Find bugs
                            </button>
                            <button class="quick-action" data-action="Add tests for the main functions">
                                üß™ Add tests
                            </button>
                            <button class="quick-action" data-action="Review and improve the code">
                                üîç Code review
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <textarea
                        id="message-input"
                        class="message-input"
                        placeholder="Ask Claude Code anything..."
                        rows="1"
                    ></textarea>
                    <div class="input-actions">
                        <button class="btn btn-icon" id="attach-btn" title="Attach file">
                            üìé
                        </button>
                        <button class="btn btn-primary" id="send-btn" title="Send (Ctrl+Enter)">
                            Send
                        </button>
                        <button class="btn btn-danger hidden" id="cancel-btn" title="Cancel">
                            ‚èπ Stop
                        </button>
                    </div>
                </div>
                <div class="input-hints">
                    <span>Press <kbd>Ctrl</kbd>+<kbd>Enter</kbd> to send</span>
                    <span class="char-count" id="char-count">0</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Settings Modal -->
    <div class="modal hidden" id="settings-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="btn btn-icon modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label>Theme</label>
                    <select id="theme-select">
                        <option value="dark">Dark</option>
                        <option value="light">Light</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>Auto-scroll</label>
                    <input type="checkbox" id="auto-scroll" checked />
                </div>
                <div class="setting-group">
                    <label>Sound notifications</label>
                    <input type="checkbox" id="sound-notifications" />
                </div>
            </div>
        </div>
    </div>

    <!-- File Browser Modal -->
    <div class="modal hidden" id="file-browser-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3>Select Workspace</h3>
                <button class="btn btn-icon modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="file-browser">
                    <div class="file-browser-path">
                        <input type="text" id="browser-path" value="~" />
                        <button class="btn btn-ghost" id="browser-go">Go</button>
                    </div>
                    <div class="file-list" id="file-list">
                        <!-- Populated dynamically -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" id="browser-cancel">Cancel</button>
                <button class="btn btn-primary" id="browser-select">Select</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
